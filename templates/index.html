{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Panneau principal -->
        <div class="col-md-9 main-panel">
            <!-- Tabs de navigation -->
            <ul class="nav nav-tabs" id="mainTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="reformulation-tab" data-bs-toggle="tab" data-bs-target="#reformulation" type="button" role="tab">Reformulation</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="translation-tab" data-bs-toggle="tab" data-bs-target="#translation" type="button" role="tab">Traduction</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="correction-tab" data-bs-toggle="tab" data-bs-target="#correction" type="button" role="tab">Correction</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="email-tab" data-bs-toggle="tab" data-bs-target="#email" type="button" role="tab">Email</button>
                </li>
            </ul>

            <!-- Contenu des tabs -->
            <div class="tab-content mt-3" id="mainTabsContent">
                <!-- Reformulation -->
                <div class="tab-pane fade show active" id="reformulation" role="tabpanel">
                    <div class="mb-3">
                        <textarea class="form-control" id="reformulationText" rows="5" placeholder="Entrez votre texte à reformuler..."></textarea>
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" id="reformulationContext" rows="2" placeholder="Contexte (optionnel)"></textarea>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <select class="form-select" id="reformulationTone">
                                <option value="formal">Formel</option>
                                <option value="casual">Décontracté</option>
                                <option value="professional">Professionnel</option>
                                <option value="friendly">Amical</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" id="reformulationFormat">
                                <option value="paragraph">Paragraphe</option>
                                <option value="bullet">Liste à puces</option>
                                <option value="numbered">Liste numérotée</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" id="reformulationLength">
                                <option value="shorter">Plus court</option>
                                <option value="similar">Similaire</option>
                                <option value="longer">Plus long</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="reformulateBtn">Reformuler</button>
                    <div id="reformulationResult" class="mt-3"></div>
                </div>

                <!-- Translation -->
                <div class="tab-pane fade" id="translation" role="tabpanel">
                    <div class="mb-3">
                        <textarea class="form-control" id="translationText" rows="5" placeholder="Entrez votre texte à traduire..."></textarea>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <select class="form-select" id="targetLanguage">
                                <option value="fr">Français</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="de">Allemand</option>
                                <option value="it">Italien</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="translateBtn">Traduire</button>
                    <div id="translationResult" class="mt-3"></div>
                </div>

                <!-- Correction -->
                <div class="tab-pane fade" id="correction" role="tabpanel">
                    <div class="mb-3">
                        <textarea class="form-control" id="correctionText" rows="5" placeholder="Entrez votre texte à corriger..."></textarea>
                    </div>
                    <button class="btn btn-primary" id="correctBtn">Corriger</button>
                    <div id="correctionResult" class="mt-3"></div>
                </div>

                <!-- Email -->
                <div class="tab-pane fade" id="email" role="tabpanel">
                    <div class="mb-3">
                        <select class="form-select" id="emailType">
                            <option value="professional">Email professionnel</option>
                            <option value="complaint">Réclamation</option>
                            <option value="request">Demande</option>
                            <option value="thanks">Remerciement</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" id="emailContent" rows="5" placeholder="Décrivez le contenu de votre email..."></textarea>
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="emailSender" placeholder="Votre nom (optionnel)">
                    </div>
                    <button class="btn btn-primary" id="generateEmailBtn">Générer l'email</button>
                    <div id="emailResult" class="mt-3"></div>
                </div>
            </div>
        </div>

        <!-- Panneau latéral (historique) -->
        <div class="col-md-3 side-panel">
            <h3>Historique</h3>
            <div class="accordion" id="historyAccordion">
                <!-- Reformulation History -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reformulationHistory">
                            Historique des reformulations
                        </button>
                    </h2>
                    <div id="reformulationHistory" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div id="reformulationHistoryContainer" class="list-group">
                                <!-- L'historique sera chargé dynamiquement via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Translation History -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#translationHistory">
                            Historique des traductions
                        </button>
                    </h2>
                    <div id="translationHistory" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div id="translationHistoryContainer" class="list-group">
                                <!-- L'historique sera chargé dynamiquement via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Correction History -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#correctionHistory">
                            Historique des corrections
                        </button>
                    </h2>
                    <div id="correctionHistory" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div id="correctionHistoryContainer" class="list-group">
                                <!-- L'historique sera chargé dynamiquement via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Email History -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#emailHistory">
                            Historique des emails
                        </button>
                    </h2>
                    <div id="emailHistory" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div id="emailHistoryContainer" class="list-group">
                                <!-- L'historique sera chargé dynamiquement via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button id="resetHistory" class="btn btn-danger w-100 mt-4">Réinitialiser l'historique</button>
        </div>
    </div>
</div>

{% include 'translation_modal.html' %}
{% include 'settings_modal.html' %}
{% endblock %}